# Лабораторная работа 4: Асинхронный gRPC сервер

## Описание
В работе разработан асинхронный сервер на Java с использованием gRPC, позволяющий клиентам отправлять задачи и получать результаты через стриминг.  

Основные компоненты:

1. **AsyncTaskServiceImpl** — сервис gRPC для отправки задач и получения результатов, потокобезопасный и поддерживающий несколько клиентов.
2. **TaskExecutor** и **TaskRegistry** — выполнение задач в фоне и хранение состояния/результатов.
3. **ClientApp** — демонстрационный клиент для синхронной и асинхронной работы с сервером.  

Цель — изучение асинхронного программирования и потокобезопасного взаимодействия сервер-клиент, с подтверждением корректности работы через модульные и интеграционные тесты.  
## **Компоненты**
1. AsyncTaskServiceImpl
- Сервис gRPC для приёма задач и выдачи результатов через стриминг.
- Потокобезопасен, поддерживает несколько клиентов одновременно.
- Реализует методы submit (отправка задачи) и awaitResult (получение результата).  

2. TaskRegistry
- Хранит все задачи и их состояния (PENDING, COMPLETED, FAILED).
- Обеспечивает быстрый доступ к результатам для асинхронных клиентов.
- Потокобезопасная структура на основе ConcurrentHashMap.  

3. TaskExecutor
- Выполняет задачи в фоне, имитируя обработку CPU-intensive или IO-intensive.
- Поддерживает асинхронную обработку и уведомляет подписчиков через StreamObserver.  

4. ClientApp
- Демонстрационный клиент для отправки задач и получения результатов.
- оддерживает синхронное (blockingStub) и асинхронное (asyncStub) взаимодействие с сервером.  

## Модульные тесты 
Покрытие (Clover):
![Coverage](images/coverage.png)

## Выводы
В рамках лабораторной работы «Разработка асинхронного серверного приложения на gRPC» успешно выполнены все поставленные задачи:
- Реализован сервер AsyncTaskServiceImpl, поддерживающий асинхронную обработку задач с типами CPU_INTENSIVE и IO_INTENSIVE.
- Создан клиент ClientApp, способный отправлять задачи на сервер и получать результаты через стриминг или блокирующий вызов.  
Результаты экспериментов демонстрируют:
- Сервер стабильно обрабатывает множество параллельных запросов без потери данных и ошибок синхронизации.
- Клиент корректно получает результаты задач, даже при высокой нагрузке, подтверждая корректность реализации асинхронной логики.
- Интеграционные и модульные тесты показали, что все основные операции сервиса работают стабильно и безопасно в многопоточном окружении.  

Изучены инструменты:
- gRPC и Netty — для реализации асинхронного сервера и клиента
- JUnit + Clover — для модульного тестирования и оценки покрытия кода
- CompletableFuture / StreamObserver — для тестирования асинхронного поведения
- JUnit для интеграционного тестирования + Clover для проведения модульного тестирования + покрытие
